// set default value when localStorage is empty
function getHtml(e,t,n){$.ajax({url:"templates/"+e+".html",type:"GET",dataType:"html",success:function(e){var r=Mustache.to_html(e,t);n(r)},error:function(){console.log("htmlerror")}})}function supports_html5_storage(){try{return"localStorage"in window&&window.localStorage!==null}catch(e){window.console.log(e);return!1}}if(localStorage.getItem("rabotlaw-language")===null){localStorage.setItem("rabotlaw-page","home");localStorage.setItem("rabotlaw-language","nl")}var pageEvents={home:function(){$(".law a").click(function(){console.log("klik");var e=$(this).attr("rel");$.ajax({type:"get",contentType:"application/json",dataType:"json",url:"data/texts-"+currentLang+".json",success:function(t){getHtml(e,t,function(e){$("#content").empty().append(e)})},error:function(){console.log("json error")}})})}};$(function(){$("#icon").click(function(){$(".menu").toggle()});Modernizr.localstorage;var e="home";$("nav a").click(function(){var e=$(this).attr("rel");localStorage.setItem("rabotlaw-page",e)});var t="nl";$("#language-chooser a").click(function(){var e=$(this).attr("rel");localStorage.setItem("rabotlaw-language",e)});currentPage=localStorage.getItem("rabotlaw-page");currentLang=localStorage.getItem("rabotlaw-language");$.ajax({type:"GET",contentType:"application/json",dataType:"json",url:"data/texts-"+currentLang+".json",success:function(e){getHtml(currentPage,e,function(e){$("#content").empty().append(e);var t=pageEvents[currentPage];t()})},error:function(){console.log("jsonerror")}});$("#language-chooser a").click(function(){var e=$(this).attr("rel");currentLang=e;currentPage=localStorage.getItem("rabotlaw-page");console.log(currentPage);$.ajax({type:"GET",contentType:"application/json",dataType:"json",url:"data/texts-"+e+".json",success:function(e){getHtml(currentPage,e,function(e){$("#content").empty().append(e);var t=pageEvents[currentPage];t()})},error:function(){window.console.log("jsonerror")}})});$("nav a").click(function(){var e=$(this).attr("rel");$.ajax({type:"GET",contentType:"application/json",dataType:"json",url:"data/texts-"+currentLang+".json",success:function(t){getHtml(e,t,function(t){$("#content").empty().append(t);var n=pageEvents[e];n()})},error:function(){window.console.log("json get error")}})})});